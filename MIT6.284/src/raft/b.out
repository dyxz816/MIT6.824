Test (2C): more persistence ...
the init votes of3is1and the term is1
vote:  3->4  true
3now votes is2and currentterm is1
vote:  3->0  true
labgob warning: Decoding into a non-default variable/field VoteGranted may not work
3now votes is3and currentterm is1
vote:  3->1  true
3now votes is4and currentterm is1
vote:  3->2  true
3now votes is5and currentterm is1
3get 5vote
start 1 task
[{1 1 11}]
the leader is3
send0log
{1 1 11}
the leader is3
send1log
{1 1 11}
the leader is3
send2log
{1 1 11}
the leader is3
send4log
{1 1 11}
commitindex is 1
lastapplied is 0
3 apply 1when the leader is3
get commit message from3and the leadercommit is1
get commit message from3and the leadercommit is1
get commit message from3and the leadercommit is1
get commit message from3and the leadercommit is1
commitindex is 1
lastapplied is 0
1 apply 1when the leader is3
commitindex is 1
lastapplied is 0
4 apply 1when the leader is3
commitindex is 1
lastapplied is 0
2 apply 1when the leader is3
commitindex is 1
lastapplied is 0
0 apply 1when the leader is3
me:0  term:1 leader:false
me:1  term:1 leader:false
me:2  term:1 leader:false
me:3  term:1 leader:true
me:4  term:1 leader:false
start 2 task
[{1 1 11} {1 2 12}]
the leader is3
send0log
{1 2 12}
the leader is3
send1log
{1 2 12}
the leader is3
send2log
{1 2 12}
the leader is3
send4log
{1 2 12}
1get
{1 2 12}
2get
{1 2 12}
commitindex is 2
lastapplied is 1
3 apply 2when the leader is3
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
get commit message from3and the leadercommit is2
get commit message from3and the leadercommit is2
commitindex is 2
lastapplied is 1
1 apply 2when the leader is3
commitindex is 2
lastapplied is 1
2 apply 2when the leader is3
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the init votes of0is1and the term is2
vote:  0->4  true
0now votes is2and currentterm is2
0get 2vote
the init votes of4is1and the term is3
vote:  4->0  true
4now votes is2and currentterm is3
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
4get 2vote
4now votes is1and currentterm is3
the init votes of2is1and the term is2
2get 1vote
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the init votes of1is1and the term is2
1get 1vote
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the init votes of0is1and the term is4
vote:  0->4  true
0now votes is2and currentterm is4
0get 2vote
the init votes of4is1and the term is5
vote:  4->0  true
4now votes is2and currentterm is5
4get 2vote
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the init votes of2is1and the term is3
2get 1vote
0now votes is0and currentterm is4
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the init votes of4is1and the term is6
vote:  4->0  true
4now votes is2and currentterm is6
vote:  4->1  false
4now votes is3and currentterm is6
4get 3vote
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
2now votes is0and currentterm is3
the init votes of0is1and the term is7
vote:  0->4  true
0now votes is2and currentterm is7
vote:  0->1  false
0now votes is3and currentterm is7
0get 3vote
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
4now votes is0and currentterm is5
the init votes of1is1and the term is3
vote:  1->4  true
1now votes is2and currentterm is3
vote:  1->0  true
1now votes is3and currentterm is3
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the init votes of2is1and the term is4
1get 3vote
2get 1vote
start 3 task
[{1 1 11} {1 2 12} {3 3 13}]
the leader is1
send0log
{3 3 13}
the leader is1
send2log
{3 3 13}
the leader is1
send3log
{3 3 13}
the leader is1
send4log
{3 3 13}
move back
4 peer nextindex is 2
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
move back
0 peer nextindex is 2
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
the leader is1
send0log
{1 2 12}
the leader is1
send2log
{3 3 13}
the leader is1
send3log
{3 3 13}
the leader is1
send4log
{1 2 12}
4get
{1 2 12}
0get
{1 2 12}
commitindex is 2
lastapplied is 0
1 apply 1when the leader is1
commitindex is 2
lastapplied is 1
1 apply 2when the leader is1
1now votes is0and currentterm is2
the leader is1
send0log
{3 3 13}
the leader is1
send2log
{3 3 13}
the leader is1
send3log
{3 3 13}
the leader is1
send4log
{3 3 13}
4get
{3 3 13}
get commit message from1and the leadercommit is2
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
0get
{3 3 13}
get commit message from1and the leadercommit is2
commitindex is 2
lastapplied is 0
0 apply 1when the leader is1
commitindex is 3
lastapplied is 2
1 apply 3when the leader is1
commitindex is 2
lastapplied is 0
4 apply 1when the leader is1
commitindex is 2
lastapplied is 1
4 apply 2when the leader is1
commitindex is 2
lastapplied is 1
0 apply 2when the leader is1
the leader is1
send2log
{3 3 13}
the leader is1
send3log
{3 3 13}
get commit message from1and the leadercommit is3
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
get commit message from1and the leadercommit is3
2now votes is0and currentterm is3
commitindex is 3
lastapplied is 2
4 apply 3when the leader is1
commitindex is 3
lastapplied is 2
0 apply 3when the leader is1
start 4 task
[{1 1 11} {1 2 12} {3 3 13} {3 4 14}]
the init votes of2is1and the term is5
vote:  2->0  false
2now votes is1and currentterm is5
vote:  2->1  false
2now votes is1and currentterm is5
vote:  2->3  true
2now votes is2and currentterm is5
vote:  2->4  false
2now votes is3and currentterm is5
the leader is1
send0log
{3 4 14}
the leader is1
send2log
{3 4 14}
the leader is1
send3log
{3 4 14}
the leader is1
send4log
{3 4 14}
4get
{3 4 14}
the leader is3
send0log
{1 2 12}
the leader is3
send4log
{1 2 12}
4get
{1 2 12}
0get
{3 4 14}
move back
get commit message from1and the lastgetindex is0
2 peer nextindex is 3
0get
{1 2 12}
get commit message from3and the lastgetindex is0
2get 0vote
commitindex is 4
lastapplied is 3
1 apply 4when the leader is3
0now votes is0and currentterm is2
get commit message from3and the lastgetindex is0
2now votes is0and currentterm is4
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
2now votes is0and currentterm is4
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
2now votes is0and currentterm is4
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
1now votes is0and currentterm is3
4now votes is1and currentterm is5
get commit message from3and the lastgetindex is0
1now votes is0and currentterm is2
get commit message from3and the lastgetindex is0
4now votes is0and currentterm is3
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
4now votes is1and currentterm is5
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
get commit message from3and the lastgetindex is0
start 3 task
[{1 1 11} {1 2 12} {5 3 14}]
4now votes is0and currentterm is3
the leader is3
send0log
{5 3 14}
the leader is3
send1log
{5 3 14}
the leader is3
send2log
{5 3 14}
the leader is3
send4log
{5 3 14}
4get
{5 3 14}
0get
{5 3 14}
1get
{5 3 14}
2get
{5 3 14}
get commit message from3and the leadercommit is2
commitindex is 3
lastapplied is 2
3 apply 3when the leader is3
2021/09/07 10:33:28 3: log map[1:11 2:12]; server map[1:11 2:12 3:13]
2021/09/07 10:33:28 3: log map[1:11 2:12]; server map[1:11 2:12 3:13 4:14]
2021/09/07 10:33:28 3: log map[1:11 2:12]; server map[1:11 2:12 3:13]
2021/09/07 10:33:28 apply error: commit index=3 server=3 14 != server=4 13
exit status 1
FAIL	6.824/raft	5.516s
